<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>裁判文书网</title>
    <link rel="stylesheet" href="/style.css">
</head>
<body>
    <header class="search-header">
        <nav class="search-nav">
            <a href="/"><img src="/logo.png"></a>
            <form id="search" action="/" method="get">
                <div class="searchbar search-searchbar">
                    <form class="search-form" action="/search">
                        <input class="search-input" type="text" id="search" name="search" value="{{ search }}">
                    </form>
                </div>
            </form>
        </nav>
        <nav class="search-second-nav">
            <div>
                {% match search_type.as_str() %}{% when "legal_basis" %}
                <a href="/?search={{search}}&search_type=case_name">搜索</a>
                <a href="/?search={{search}}&search_type=legal_basis" class="selected">法律依据</a>
                <a href="/?search={{search}}&search_type=cause">案由</a>
                {% when "cause" %}
                <a href="/?search={{search}}&search_type=case_name">搜索</a>
                <a href="/?search={{search}}&search_type=legal_basis">法律依据</a>
                <a href="/?search={{search}}&search_type=cause" class="selected">案由</a>
                {% else %}
                <a href="/?search={{search}}&search_type=case_name" class="selected">搜索</a>
                <a href="/?search={{search}}&search_type=legal_basis">法律依据</a>
                <a href="/?search={{search}}&search_type=cause">案由</a>
                {% endmatch %}
            </div>
            <div>
                共找到 {{ total }} 条结果
            </div>
        </nav>
    </header>

    <main class="search-results">
        {% for (id,case) in cases %}
        <div class="search-result-text">
            <a class="nounderline" href="/case/{{id}}" target="_blank">
                <h3 class="underlineonhover">{{ case.case_name }}</h3>
            </a>
            <p>{{ case.judgment_date }} - {{ case.case_type }} - {{ case.procedure }}</p>
            <p>{{ case.full_text|truncate(240) }}</p>
            <a class="nounderline" href="/case/{{id}}" target="_blank">{{case.case_id}} - {{ case.court }}</a>
        </div>
        {% endfor %}
    </main>

    <div class="pagination">
        {% if cases.len() >= 20 %}
            {% if offset >= 20 %}
            <a href="/?search={{ search }}&offset={{ offset - 20 }}">上一页</a>&nbsp;&nbsp;&nbsp;&nbsp;
            {% endif %}
        <a href="/?search={{ search }}&offset={{ offset + 20 }}">下一页</a>
        {% endif %}
    </div>
</body>
</html> 